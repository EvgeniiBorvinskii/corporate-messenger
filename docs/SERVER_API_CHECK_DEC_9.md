# –ü—Ä–æ–≤–µ—Ä–∫–∞ API –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ 5.249.160.54
## –î–∞—Ç–∞: 9 –¥–µ–∫–∞–±—Ä—è 2025

**–°–µ—Ä–≤–µ—Ä:** http://5.249.160.54:80  
**–ü–æ—Ä—Ç:** 80 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π HTTP)

## ‚úÖ –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

### 1. –°–∫—Ä—ã—Ç–∏–µ —ç–º–æ–¥–∑–∏ —Ä–µ–∞–∫—Ü–∏–π ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –£–ñ–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û
- **–§–∞–π–ª**: `mobile/lib/widgets/message_reactions.dart`
- **–ö–æ–¥**: –°—Ç—Ä–æ–∫–∏ 22-25 - –≤–∏–¥–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `SizedBox.shrink()` –µ—Å–ª–∏ `reactions.isEmpty`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –≠–º–æ–¥–∑–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –µ—Å—Ç—å —Ä–µ–∞–∫—Ü–∏–∏

### 2. –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞ ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –£–ñ–ï –ü–ï–†–ï–í–ï–î–ï–ù–û
- **–§–∞–π–ª—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**: 
  - `chats_tab_screen.dart`
  - `voice_rooms_screen.dart`
  - `team_chats_screen.dart`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º

### 3. –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–∞–Ω–∞–ª–∞ ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –£–ñ–ï –ò–°–ü–†–ê–í–õ–ï–ù–û
- **–§–∞–π–ª**: `mobile/lib/screens/channels/create_channel_screen.dart`
- **–ö–æ–¥**: 
  - –°—Ç—Ä–æ–∫–∞ 93: `_selectedTab = widget.initialType == 'voice' ? 'voice' : 'chats';`
  - –°—Ç—Ä–æ–∫–∞ 169: `'category': _selectedTab`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–∞–Ω–∞–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (Chats –∏–ª–∏ Voice)

---

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

### 4. API –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–æ–ª–µ–π —Ä–∞–±–æ—Ç–Ω–∏–∫–∞–º
- **–ü—Ä–æ–±–ª–µ–º–∞**: –†–æ–ª–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –Ω–æ –ø–∏—à–µ—Ç "Roles updated"
- **–ù—É–∂–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç**: `PUT /api/admin/employees/:id/roles`
- **Body**: `{ "roles": ["role1", "role2"] }`
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ **5.249.160.54:80**

### 5. API —É–¥–∞–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
- **–ü—Ä–æ–±–ª–µ–º–∞**: –†–∞–±–æ—Ç–Ω–∏–∫ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è
- **–ù—É–∂–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç**: `DELETE /api/admin/employees/:id`
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ **5.249.160.54:80**

### 6. API —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ –≤—Ä—É—á–Ω—É—é
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ä—É—á–Ω—É—é
- **–ù—É–∂–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç**: `POST /api/admin/employees`
- **Body**: 
```json
{
  "email": "user@example.com",
  "full_name": "Full Name",
  "password": "password",
  "roles": ["role1"]
}
```
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ **5.249.160.54:80**

### 7. DM —á–∞—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥—É —Å–æ–æ–±—â–µ–Ω–∏—è
- **–ù—É–∂–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**:
  - `GET /api/messages/dm/:userId/messages` - –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  - `POST /api/messages/dm/:userId/messages` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ **5.249.160.54:80**

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
TOKEN=$(curl -s -X POST http://5.249.160.54:80/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@lonestar.com","password":"your_password"}' \
  | grep -o '"token":"[^"]*"' | cut -d'"' -f4)

echo "Token: $TOKEN"

# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ–ª–µ–π
curl -X PUT http://5.249.160.54:80/api/admin/employees/2/roles \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"roles": ["sales"]}'

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç —É–¥–∞–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
curl -X DELETE http://5.249.160.54:80/api/admin/employees/999 \
  -H "Authorization: Bearer $TOKEN"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞
curl -X POST http://5.249.160.54:80/api/admin/employees \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"email":"test@test.com","full_name":"Test User","password":"123456","roles":["user"]}'

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DM —á–∞—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
curl -X GET http://5.249.160.54:80/api/messages/dm/2/messages \
  -H "Authorization: Bearer $TOKEN"

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DM —á–∞—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
curl -X POST http://5.249.160.54:80/api/messages/dm/2/messages \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"content":"Hello!"}'
```

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. **–°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–∞** `178.140.231.110:3000`
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞** –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —ç—Ç–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
3. **–î–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** –Ω–∞ —Å–µ—Ä–≤–µ—Ä
4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä** –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

---

## üì± –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
1. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `flutter build ios --release --no-codesign`
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π —Ä–∞–±–æ—Ç–Ω–∏–∫–∞–º
   - –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ –≤—Ä—É—á–Ω—É—é
   - –û—Ç–ø—Ä–∞–≤–∫—É DM —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
