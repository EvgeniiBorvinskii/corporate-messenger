╔══════════════════════════════════════════════════════════════╗
║                                                              ║
║  📱 ТЕСТИРОВАНИЕ ИСПРАВЛЕНИЙ - ПОШАГОВО                      ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────┐
│ ШАГ 1: ВОЙТИ В ПРИЛОЖЕНИЕ                                   │
└──────────────────────────────────────────────────────────────┘

На iPhone:
  1. Откройте приложение "Lone Star Chat"
  2. Введите:
     Email: admin
     Password: admin
  3. Нажмите "Войти"

✅ Должны успешно войти в приложение

┌──────────────────────────────────────────────────────────────┐
│ ШАГ 2: ПРОВЕРИТЬ КАНАЛ NEWS                                  │
└──────────────────────────────────────────────────────────────┘

  1. Перейдите на вкладку "Главная" (внизу экрана)
  2. Потяните экран вниз (Pull to Refresh)
  3. Ищите канал с названием "News"

✅ Канал News ДОЛЖЕН отобразиться
✅ При клике на News должен открыться Safari

❌ Если НЕТ:
  - Вернитесь в терминал
  - Нажмите клавишу: R (большая R)
  - Подождите 5 секунд
  - Повторите проверку

┌──────────────────────────────────────────────────────────────┐
│ ШАГ 3: ПРОВЕРИТЬ ПОЛЬЗОВАТЕЛЕЙ В АДМИНКЕ                    │
└──────────────────────────────────────────────────────────────┘

  1. Нажмите на кнопку "Админ панель" (или иконку настроек)
  2. Выберите "Пользователи"
  3. Посмотрите список

✅ Должно быть 6 пользователей:
  • admin@lonestar.local
  • admin.test@lonestar.com
  • sales.test@lonestar.com
  • service.test@lonestar.com
  • parts.test@lonestar.com
  • lot.test@lonestar.com

❌ Если список пустой:
  - Перейдите на другую вкладку (Статистика)
  - Вернитесь обратно на Пользователи
  - Список должен загрузиться

┌──────────────────────────────────────────────────────────────┐
│ ШАГ 4: ПРОВЕРИТЬ СОТРУДНИКОВ                                 │
└──────────────────────────────────────────────────────────────┘

  1. Перейдите на вкладку "Сотрудники" (внизу экрана)
  2. Посмотрите список

✅ Должно быть 5 сотрудников (все кроме master admin):
  • Admin Test - Administrators
  • Sales Test - Sales
  • Service Test - Service
  • Parts Test - Parts
  • Lot Team Test - Lot Team

❌ Если список пустой:
  - Используйте поиск вверху экрана
  - Начните вводить "test"
  - Сотрудники должны появиться

┌──────────────────────────────────────────────────────────────┐
│ ШАГ 5: ПРОВЕРИТЬ НОВЫЕ КАНАЛЫ                                │
└──────────────────────────────────────────────────────────────┘

Когда вы создаете новый канал:
  1. Канал должен появиться в списке сразу
  2. Если НЕТ - потяните список вниз (Pull to Refresh)
  3. Канал должен появиться

┌──────────────────────────────────────────────────────────────┐
│ 🐛 ЕСЛИ ЧТО-ТО НЕ РАБОТАЕТ                                   │
└──────────────────────────────────────────────────────────────┘

Вариант 1: Hot Restart (быстро)
  В терминале где запущено flutter run:
    Нажмите: R (большая R)
    Подождите 5 секунд

Вариант 2: Полный перезапуск
  В терминале:
    pkill -9 -f flutter
    cd "/Users/svetanaborvinskaia/Desktop/Lone Star Chat/mobile"
    flutter run -d 00008150-001229522280401C

Вариант 3: Проверить backend
  ./CHECK_SERVER_DATA.sh
  (должно показать 6 users и 6 channels)

┌──────────────────────────────────────────────────────────────┐
│ 📊 ЛОГИ КОТОРЫЕ ДОЛЖНЫ БЫТЬ В КОНСОЛИ                        │
└──────────────────────────────────────────────────────────────┘

Хорошие логи:
  ✅ flutter: 📥 Response: 200 http://5.249.160.54:3002/api/channels
  ✅ flutter: 📥 Response: 200 http://5.249.160.54:3002/api/users
  ✅ flutter: 📥 Response: 200 http://5.249.160.54:3002/api/version/check

Плохие логи:
  ❌ flutter: 📥 Response: 401 (токен не передается)
  ❌ flutter: 📥 Response: 404 (неправильный URL)
  ❌ flutter: Error loading channels (ошибка парсинга)

Чтобы посмотреть логи:
  tail -f /tmp/flutter_fixed.log | grep "flutter:"

┌──────────────────────────────────────────────────────────────┐
│ 🎯 КРИТИЧНЫЕ МОМЕНТЫ                                          │
└──────────────────────────────────────────────────────────────┘

1. Backend работает на 100% ✅
   Все данные там есть (проверено)

2. Токен теперь передается правильно ✅
   (исправлен ApiService)

3. /version/check исправлен ✅
   (было /version/check, стало /api/version/check)

4. После HOT RESTART всё ДОЛЖНО работать! 🎉

╔══════════════════════════════════════════════════════════════╗
║                                                              ║
║  🚀 ТЕСТИРУЙТЕ И ГОВОРИТЕ ЧТО ВИДИТЕ!                       ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝
