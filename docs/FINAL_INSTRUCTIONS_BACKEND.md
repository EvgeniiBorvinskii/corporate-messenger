# üéØ –§–∏–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è - Backend

## üìã –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–û (Frontend - 6 –∑–∞–¥–∞—á)

1. ‚úÖ –°–∞–º–æ—Ä–µ–∞–∫—Ü–∏–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã (–∫—Ä–æ–º–µ –º–∞—Å—Ç–µ—Ä–∞)
2. ‚úÖ –°—á–µ—Ç—á–∏–∫ —Ä–µ–∞–∫—Ü–∏–π –≤ –ø—Ä–æ—Ñ–∏–ª–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ Blur —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –¥–æ–ª–≥–æ–º –Ω–∞–∂–∞—Ç–∏–∏
4. ‚úÖ DM —á–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
5. ‚úÖ –†–µ–∞–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
6. ‚úÖ –í–µ—Å—å —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω

### ‚ö†Ô∏è –û–°–¢–ê–õ–û–°–¨ 1 –ó–ê–î–ê–ß–ê (Backend)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–Ω–∞–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤—Å–µ–≥–¥–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "Home", –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ (Chats/Voice).

**–ü—Ä–∏—á–∏–Ω–∞:** Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `category` –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ backend –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —ç—Ç–æ –ø–æ–ª–µ –≤ `channels.json`.

---

## üîß –†–µ—à–µ–Ω–∏–µ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å SSH –¥–æ—Å—Ç—É–ø (–µ—Å–ª–∏ –∑–∞–∫—Ä—ã—Ç)

–°–µ—Ä–≤–µ—Ä: **5.249.160.54**  
–ü–æ—Ä—Ç SSH: **22** (—Å–µ–π—á–∞—Å –∑–∞–∫—Ä—ã—Ç)  
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: **root**  
–ü–∞—Ä–æ–ª—å: **54654250pS3123**

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSH:**
```bash
ssh -p 22 root@5.249.160.54
```

–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç 22 –≤ firewall:
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å —Ö–æ—Å—Ç–∏–Ω–≥–∞):
ufw allow 22/tcp
# –∏–ª–∏
iptables -A INPUT -p tcp --dport 22 -j ACCEPT
```

---

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–° –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:**
```bash
cd "/Users/svetanaborvinskaia/Desktop/Lone Star Chat"
scp -P 22 add_missing_endpoints.js root@5.249.160.54:/root/
```

–ò–ª–∏ —Å –ø–∞—Ä–æ–ª–µ–º:
```bash
sshpass -p '54654250pS3123' scp -P 22 add_missing_endpoints.js root@5.249.160.54:/root/
```

---

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@5.249.160.54

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é backend
cd /root

# –°–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø —Ç–µ–∫—É—â–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
cp server-chat.js server-chat.js.backup-$(date +%Y%m%d-%H%M%S)

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è endpoints
node add_missing_endpoints.js

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend —Å–µ—Ä–≤–µ—Ä
pm2 restart server-chat
# –∏–ª–∏ –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è pm2:
systemctl restart chat-backend
```

---

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

**–ò–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
2. –í—ã–±—Ä–∞—Ç—å –≤–∫–ª–∞–¥–∫—É "Voice" –∏–ª–∏ "Chats"
3. –°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–∞–Ω–∞–ª –ø–æ—è–≤–∏–ª—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
cat /root/data/channels.json | jq '.channels[] | {name: .name, category: .category}'

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å category: "voice" –∏–ª–∏ "chats"
```

---

## üìù –ß—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–∫—Ä–∏–ø—Ç `add_missing_endpoints.js`

–°–∫—Ä–∏–ø—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç 5 –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö endpoints –≤ `server-chat.js`:

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
```
PUT /api/admin/employees/:id/roles
```

### 2. –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
```
DELETE /api/admin/employees/:id
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
```
POST /api/admin/employees
```

### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ DM —Å–æ–æ–±—â–µ–Ω–∏–π
```
GET /api/messages/dm/:userId/messages
```

### 5. –û—Ç–ø—Ä–∞–≤–∫–∞ DM —Å–æ–æ–±—â–µ–Ω–∏–π
```
POST /api/messages/dm/:userId/messages
```

### 6. ‚≠ê –ì–õ–ê–í–ù–û–ï: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–∞

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç endpoint —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ–ª–µ `category`:

```javascript
app.post('/api/channels', authenticateToken, async (req, res) => {
  // ...
  const newChannel = {
    id: generateId(),
    name,
    description: description || '',
    type,
    category: category || 'chats', // ‚≠ê –î–û–ë–ê–í–õ–ï–ù–û!
    created_at: new Date().toISOString(),
    created_by: req.user.userId
  };
  // ...
});
```

---

## üîç –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ SSH –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)

–ï—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ SSH, –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —Ö–æ—Å—Ç–∏–Ω–≥–∞:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ñ–∞–π–ª–æ–≤–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞

1. –í–æ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å —Ö–æ—Å—Ç–∏–Ω–≥–∞ (ISPmanager/Plesk/cPanel)
2. –û—Ç–∫—Ä—ã—Ç—å File Manager
3. –ù–∞–π—Ç–∏ —Ñ–∞–π–ª `/root/server-chat.js`
4. –°–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø —Ñ–∞–π–ª–∞
5. –û—Ç–∫—Ä—ã—Ç—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
6. –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É `app.post('/api/channels',` (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 500-600)
7. –î–æ–±–∞–≤–∏—Ç—å –≤ –æ–±—ä–µ–∫—Ç `newChannel` –ø–æ–ª–µ:
   ```javascript
   category: req.body.category || 'chats',
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å —Ö–æ—Å—Ç–∏–Ω–≥–∞

–ú–Ω–æ–≥–∏–µ —Ö–æ—Å—Ç–∏–Ω–≥–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å:

1. –û—Ç–∫—Ä—ã—Ç—å –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å –≤ –ø–∞–Ω–µ–ª–∏ —Ö–æ—Å—Ç–∏–Ω–≥–∞
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏–∑ "–®–∞–≥ 3" –≤—ã—à–µ

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è backend

**HTTP –¥–æ—Å—Ç—É–ø —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
curl -I http://5.249.160.54/
# ‚úÖ HTTP/1.1 404 Not Found (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)

curl http://5.249.160.54/api/channels
# ‚úÖ {"error":"Authentication required"} (API —Ä–∞–±–æ—Ç–∞–µ—Ç)
```

**SSH –¥–æ—Å—Ç—É–ø:**
```bash
ssh -p 22 root@5.249.160.54
# ‚ùå Connection timeout (–ø–æ—Ä—Ç –∑–∞–∫—Ä—ã—Ç)
```

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [x] Frontend: –°–∞–º–æ—Ä–µ–∞–∫—Ü–∏–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã
- [x] Frontend: –°—á–µ—Ç—á–∏–∫ —Ä–µ–∞–∫—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç  
- [x] Frontend: Blur —ç—Ñ—Ñ–µ–∫—Ç –¥–æ–±–∞–≤–ª–µ–Ω
- [x] Frontend: DM —á–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [x] Frontend: –†–µ–∞–∫—Ü–∏–∏ –Ω–µ –ø—Ä–æ–ø–∞–¥–∞—é—Ç
- [x] Frontend: –†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω
- [ ] **Backend: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–∞–Ω–∞–ª–∞** ‚¨ÖÔ∏è –û–°–¢–ê–õ–û–°–¨ –¢–û–õ–¨–ö–û –≠–¢–û

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —Å–µ—Ä–≤–µ—Ä–∞:
- –§–∞–π–ª —Å–∫—Ä–∏–ø—Ç–∞: `add_missing_endpoints.js` (—É–∂–µ —Å–æ–∑–¥–∞–Ω)
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: `MANUAL_INSTALLATION_GUIDE.md`
- –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: `READY_TO_INSTALL.md`

---

## ‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –Ω–∞ backend:**
- –û—Ç–∫—Ä—ã—Ç–∏–µ SSH: 1-5 –º–∏–Ω—É—Ç
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞: 1 –º–∏–Ω—É—Ç–∞  
- –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞: 1 –º–∏–Ω—É—Ç–∞
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞: 1 –º–∏–Ω—É—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞: 2 –º–∏–Ω—É—Ç—ã

**–ò—Ç–æ–≥–æ: ~10 –º–∏–Ω—É—Ç** üöÄ

---

**–î–∞—Ç–∞:** 9 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ 85.7% –∑–∞–≤–µ—Ä—à–µ–Ω–æ (6/7 –∑–∞–¥–∞—á)  
**–ë–ª–æ–∫–µ—Ä:** üîí SSH –ø–æ—Ä—Ç 22 –∑–∞–∫—Ä—ã—Ç  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û—Ç–∫—Ä—ã—Ç—å SSH ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç ‚Üí –ó–∞–ø—É—Å—Ç–∏—Ç—å ‚Üí –ì–æ—Ç–æ–≤–æ! üéâ
