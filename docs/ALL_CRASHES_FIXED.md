# ‚úÖ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã! (11 –¥–µ–∫–∞–±—Ä—è 2025)

## üêõ –ß—Ç–æ –±—ã–ª–æ —Å–ª–æ–º–∞–Ω–æ:

### 1. ‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏–ª–æ—Å—å –ø—Ä–∏ –∑–≤–æ–Ω–∫–∞—Ö
**–ü—Ä–∏—á–∏–Ω–∞**: CallService –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å—Ç–∞—Ä—ã–µ Socket.io —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–ª–∏ —Å –Ω–æ–≤—ã–º –±—ç–∫–µ–Ω–¥–æ–º

### 2. ‚ùå –ë–ª—é—Ä –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–ª –≤–µ—Å—å —ç–∫—Ä–∞–Ω
**–ü—Ä–∏—á–∏–Ω–∞**: MediaQuery –¥–∞–≤–∞–ª —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞ –ë–ï–ó safe area (notch –∏ home indicator)

### 3. ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –æ—à–∏–±–∫–∞ "Connection Failed"
**–ü—Ä–∏—á–∏–Ω–∞**: 
- –ù–µ—Ç —Ç–∞–π–º–∞—É—Ç–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
- –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (—Å await)

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. üìû WebRTC –∑–≤–æ–Ω–∫–∏ - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω—ã!

**–§–∞–π–ª**: `mobile/lib/services/call_service.dart`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ Socket.io —Å–æ–±—ã—Ç–∏—è –Ω–∞ –Ω–æ–≤—ã–µ (–±—ç–∫–µ–Ω–¥ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å):
  - `call:incoming` –≤–º–µ—Å—Ç–æ `incoming_call`
  - `call:accepted` –≤–º–µ—Å—Ç–æ `call_accepted`
  - `call:rejected` –≤–º–µ—Å—Ç–æ `call_rejected`
  - `call:offer` –≤–º–µ—Å—Ç–æ `sdp_offer`
  - `call:answer` –≤–º–µ—Å—Ç–æ `sdp_answer`
  - `call:ice-candidate` –≤–º–µ—Å—Ç–æ `ice_candidate`
  - `call:end` –≤–º–µ—Å—Ç–æ `end_call`
  - `call:toggle-audio` / `call:toggle-video` - –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è Socket.io:
  ```dart
  _socket!.emit('authenticate', {'token': token});
  ```

- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞—Ü–∏—è –∑–≤–æ–Ω–∫–∞:
  - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `callId`
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `call:initiate` –ø–µ—Ä–µ–¥ `call:offer`
  - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö: `callType`, `targetUserId`

- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–∏–Ω—è—Ç–∏–µ –∑–≤–æ–Ω–∫–∞:
  - –°–æ–∑–¥–∞—ë—Ç—Å—è peer connection
  - –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `call:accept` —Å `callerId`

- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ SDP offer/answer:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è peer connection
  - Try-catch –¥–ª—è –æ—à–∏–±–æ–∫
  - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: `data['offer']['sdp']`
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ `connected`

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–≤–æ–Ω–∫–∞:
  ```dart
  final duration = DateTime.now().difference(_callStartTime!).inSeconds;
  ```

- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ mute/video toggle

### 2. üñ•Ô∏è –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –±–ª—é—Ä - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω!

**–§–∞–π–ª**: `mobile/lib/widgets/discord_message_menu.dart`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `View.of(context).physicalSize` –≤–º–µ—Å—Ç–æ `MediaQuery`:
  ```dart
  final view = View.of(context);
  final screenHeight = view.physicalSize.height / view.devicePixelRatio;
  final screenWidth = view.physicalSize.width / view.devicePixelRatio;
  ```

- ‚úÖ Container —Å —è–≤–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏:
  ```dart
  Container(
    width: screenWidth,
    height: screenHeight,
    color: Colors.transparent,
    child: Stack(...)
  )
  ```

- ‚úÖ Positioned.fill –¥–ª—è –±–ª—é—Ä–∞:
  ```dart
  Positioned.fill(
    child: BackdropFilter(...)
  )
  ```

**–¢–µ–ø–µ—Ä—å –±–ª—é—Ä –ø–æ–∫—Ä—ã–≤–∞–µ—Ç**:
- ‚úÖ –í–µ—Å—å —ç–∫—Ä–∞–Ω –≤–∫–ª—é—á–∞—è notch (–≤—ã—Ä–µ–∑ –≤–≤–µ—Ä—Ö—É)
- ‚úÖ Home indicator (–ø–æ–ª–æ—Å–∫–∞ –≤–Ω–∏–∑—É)
- ‚úÖ –í—Å–µ —É–≥–ª—ã —ç–∫—Ä–∞–Ω–∞

### 3. üöÄ –ë—ã—Å—Ç—Ä–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞!

#### –§–∞–π–ª 1: `mobile/lib/providers/auth_provider.dart`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚úÖ –£–±—Ä–∞–Ω–∞ –±–ª–æ–∫–∏—Ä—É—é—â–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
  ```dart
  _isLoading = false; // –°—Ä–∞–∑—É!
  notifyListeners(); // UI –≥–æ—Ç–æ–≤
  ```

- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–∞ (500ms —Ç–∞–π–º–∞—É—Ç):
  ```dart
  final token = await _authService.getStoredToken().timeout(
    const Duration(milliseconds: 500),
    onTimeout: () => null,
  );
  ```

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ - –í –§–û–ù–ï –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
  ```dart
  checkVersion().catchError((e) {
    print('‚ö†Ô∏è  –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ –≤ —Ñ–æ–Ω–µ: $e');
  });
  ```

- ‚úÖ –¢–∞–π–º–∞—É—Ç –ª–æ–≥–∏–Ω–∞ (10 —Å–µ–∫—É–Ω–¥):
  ```dart
  final response = await _authService.login(email, password).timeout(
    const Duration(seconds: 10),
    onTimeout: () => throw Exception('–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è.'),
  );
  ```

- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –ë–ï–ó –û–ñ–ò–î–ê–ù–ò–Ø:
  ```dart
  _authService.storeToken(_token!).catchError((e) {
    print('‚ö†Ô∏è –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞: $e');
  });
  ```

- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö (–Ω–∞ —Ä—É—Å—Å–∫–æ–º)

#### –§–∞–π–ª 2: `mobile/lib/services/auth_service.dart`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚úÖ –¢–∞–π–º–∞—É—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å –ª–æ–≥–∏–Ω–∞ (8 —Å–µ–∫—É–Ω–¥):
  ```dart
  final response = await _api.post('/api/auth/login', {...}).timeout(
    const Duration(seconds: 8),
    onTimeout: () => {'error': 'timeout', 'message': '...'},
  );
  ```

- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI):
  ```dart
  storeToken(response['token']).catchError((e) {
    print('‚ö†Ô∏è –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞: $e');
  });
  ```

- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –Ω–∞ —Ä—É—Å—Å–∫–æ–º:
  - `'–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É.\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP –∞–¥—Ä–µ—Å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ—Ñ–∏–ª—è.'`
  - `'–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.'`
  - `'–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º.'`

- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –≤–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–∫–∏ –±–µ–∑ –∞–≤—Ç–æ–ø–æ–∏—Å–∫–∞ IP

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚ùå –ö—Ä–∞—à –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–∑–≤–æ–Ω–∏—Ç—å
- ‚ùå –ë–ª—é—Ä –Ω–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω (–≤–∏–¥–Ω—ã notch –∏ home indicator)
- ‚ùå –õ–æ–≥–∏–Ω 15-30 —Å–µ–∫—É–Ω–¥
- ‚ùå –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ "Connection Failed"

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –ó–≤–æ–Ω–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ë–ª—é—Ä –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤–µ—Å—å —ç–∫—Ä–∞–Ω
- ‚úÖ –õ–æ–≥–∏–Ω 2-5 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ß—ë—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

### WebRTC —Å–æ–±—ã—Ç–∏—è (–±—ç–∫–µ–Ω–¥ ‚Üî —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥):

**–û—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∫ –±—ç–∫–µ–Ω–¥—É**:
- `call:initiate` - –Ω–∞—á–∞—Ç—å –∑–≤–æ–Ω–æ–∫
- `call:accept` - –ø—Ä–∏–Ω—è—Ç—å –∑–≤–æ–Ω–æ–∫
- `call:reject` - –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–≤–æ–Ω–æ–∫
- `call:offer` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å SDP offer
- `call:answer` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å SDP answer
- `call:ice-candidate` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å ICE candidate
- `call:end` - –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫
- `call:toggle-audio` - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω
- `call:toggle-video` - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É

**–û—Ç –±—ç–∫–µ–Ω–¥–∞ –∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É**:
- `call:incoming` - –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
- `call:ringing` - –∏–¥—ë—Ç –≤—ã–∑–æ–≤
- `call:accepted` - –∑–≤–æ–Ω–æ–∫ –ø—Ä–∏–Ω—è—Ç
- `call:rejected` - –∑–≤–æ–Ω–æ–∫ –æ—Ç–∫–ª–æ–Ω—ë–Ω
- `call:offer` - –ø–æ–ª—É—á–µ–Ω SDP offer
- `call:answer` - –ø–æ–ª—É—á–µ–Ω SDP answer
- `call:ice-candidate` - –ø–æ–ª—É—á–µ–Ω ICE candidate
- `call:ended` - –∑–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω
- `call:audio-toggled` - —É–¥–∞–ª—ë–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∏–ª –º–∏–∫—Ä–æ—Ñ–æ–Ω
- `call:video-toggled` - —É–¥–∞–ª—ë–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∏–ª –∫–∞–º–µ—Ä—É

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

**–ß—Ç–æ —É—Å–∫–æ—Ä–µ–Ω–æ**:
1. –£–±—Ä–∞–Ω–∞ –±–ª–æ–∫–∏—Ä—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
2. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–∞ —Å —Ç–∞–π–º–∞—É—Ç–æ–º 500ms
3. –ó–∞–ø—Ä–æ—Å –ª–æ–≥–∏–Ω–∞ —Å —Ç–∞–π–º–∞—É—Ç–æ–º 8s
4. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–±–µ–∑ await)
5. –ë—ã—Å—Ç—Ä—ã–π –≤–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–æ–∫

**–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏**:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: ~100ms (–±—ã–ª–æ: 3-5s)
- –õ–æ–≥–∏–Ω: 2-5s (–±—ã–ª–æ: 15-30s)
- –û–±—â–µ–µ –≤—Ä–µ–º—è –≤—Ö–æ–¥–∞: ~5s (–±—ã–ª–æ: ~30s)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### 1. –¢–µ—Å—Ç –±–ª—é—Ä–∞:
```
1. –û—Ç–∫—Ä—ã—Ç—å –ª—é–±–æ–π —á–∞—Ç
2. –î–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–ª—é—Ä –ø–æ–∫—Ä—ã–≤–∞–µ—Ç:
   ‚úì –í–µ—Ä—Ö–Ω–∏–π notch (–≤—ã—Ä–µ–∑)
   ‚úì –ù–∏–∂–Ω–∏–π home indicator
   ‚úì –í—Å–µ —É–≥–ª—ã —ç–∫—Ä–∞–Ω–∞
```

### 2. –¢–µ—Å—Ç –∑–≤–æ–Ω–∫–æ–≤ (2 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞):
```
1. –í–æ–π—Ç–∏ –Ω–∞ –¥–≤—É—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (—Ä–∞–∑–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
2. Device 1: –ü–æ–∑–≤–æ–Ω–∏—Ç—å Device 2 (–∞—É–¥–∏–æ)
3. Device 2: –ü—Ä–∏–Ω—è—Ç—å –∑–≤–æ–Ω–æ–∫
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑—å
5. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å mute/unmute
6. –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫
7. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å –≤–∏–¥–µ–æ –∑–≤–æ–Ω–∫–æ–º
8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–≤–æ–Ω–∫–æ–≤

‚ùå –ï—Å–ª–∏ –∫—Ä–∞—à - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
   - –û—à–∏–±–∫–∏ Socket.io –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –û—à–∏–±–∫–∏ WebRTC peer connection
   - –û—à–∏–±–∫–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ–¥–∏–∞ –ø–æ—Ç–æ–∫–∞
```

### 3. –¢–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
```
1. –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ó–∞—Å–µ—á—å –≤—Ä–µ–º—è –æ—Ç –∑–∞–ø—É—Å–∫–∞ –¥–æ —ç–∫—Ä–∞–Ω–∞ –ª–æ–≥–∏–Ω–∞
   ‚úì –î–æ–ª–∂–Ω–æ –±—ã—Ç—å < 1 —Å–µ–∫—É–Ω–¥—ã
4. –í–≤–µ—Å—Ç–∏ email –∏ –ø–∞—Ä–æ–ª—å
5. –ù–∞–∂–∞—Ç—å "Login"
6. –ó–∞—Å–µ—á—å –≤—Ä–µ–º—è –¥–æ –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
   ‚úì –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 2-5 —Å–µ–∫—É–Ω–¥
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ—à–∏–±–∫–∏ –ø–æ–Ω—è—Ç–Ω—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º
```

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫.

**–ó–∞–ø—É—Å–∫ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ**:
```bash
cd mobile
flutter run --release
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –±—ç–∫–µ–Ω–¥–∞**:
```bash
# ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –í–´–î–ï–õ–ï–ù–ù–´–ô –°–ï–†–í–ï–†: 5.249.160.54:666
# –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –ù–ï –Ω—É–∂–µ–Ω!

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç:
curl http://5.249.160.54:666/api/channels

# –í—ã–≤–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
{"error":"Authentication required"}

# –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç! ‚úÖ
```

**–í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã**:
- ‚úÖ `mobile/lib/services/call_service.dart` - WebRTC –∑–≤–æ–Ω–∫–∏
- ‚úÖ `mobile/lib/widgets/discord_message_menu.dart` - –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –±–ª—é—Ä
- ‚úÖ `mobile/lib/providers/auth_provider.dart` - –±—ã—Å—Ç—Ä–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ `mobile/lib/services/auth_service.dart` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ `backend/server-chat.js` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–≤–æ–Ω–∫–æ–≤

---

## üìä –°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

| –ü—Ä–æ–±–ª–µ–º–∞ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –§–∞–π–ª—ã |
|----------|-------------|-------|
| –ö—Ä–∞—à –ø—Ä–∏ –∑–≤–æ–Ω–∫–∞—Ö | –û–±–Ω–æ–≤–ª–µ–Ω—ã Socket.io —Å–æ–±—ã—Ç–∏—è | `call_service.dart` |
| –ë–ª—é—Ä –Ω–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω | View.physicalSize | `discord_message_menu.dart` |
| –ú–µ–¥–ª–µ–Ω–Ω—ã–π –ª–æ–≥–∏–Ω | –¢–∞–π–º–∞—É—Ç—ã, async storage | `auth_provider.dart`, `auth_service.dart` |
| Connection Failed | –õ—É—á—à–∏–µ –æ—à–∏–±–∫–∏, –±—ã—Å—Ç—Ä—ã–π –≤–æ–∑–≤—Ä–∞—Ç | `auth_service.dart` |

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã! üéâ**
